<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>EPICS Multi-Core Utilities: EPICS Multi-Core Utilities</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">EPICS Multi-Core Utilities
   &#160;<span id="projectnumber">1.2.1</span>
   </div>
   <div id="projectbrief">Real-Time Utilities for EPICS IOCs on Multi-Core Linux</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">EPICS Multi-Core Utilities </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="scope"></a>
Scope of this Document</h1>
<p>This documentation covers the C API and the iocShell commands of the EPICS Multi-Core Utilities.</p>
<h1><a class="anchor" id="intro_sec"></a>
Introduction</h1>
<p>The EPICS Multi-Core Utilities library contains tools that allow tweaking of real-time parameters for EPICS IOC threads running on multi-core processors under the Linux operating system.</p>
<p>These tools are intended to set up multi-core IOCs for fast controllers, by: </p><ul>
<li>Confining either parts or the complete EPICS IOC onto a subset of the available cores, allowing hard real-time applications and threads to run on dedicated cores. </li>
<li>Changing priorities of callback, driver or communication threads with respect to database processing. </li>
<li>Selecting real-time scheduling policy (FIFO or Round-Robin) for selected threads. </li>
<li>Locking the IOC process virtual memory into RAM to avoid swapping.</li>
</ul>
<h2><a class="anchor" id="intro_show"></a>
Advanced Thread Show Routines</h2>
<p>An extended version of the <code>epicsThreadShow()</code> command, showing scheduling policy and CPU affinity in addition to the usual output.</p>
<p>Details can be found in the documentation for module <a class="el" href="group__threadshow.html">Real-Time threadShow Routines</a>.</p>
<h2><a class="anchor" id="intro_rules"></a>
Rule Based Real-Time Property Manipulation</h2>
<p>A module allowing to specify rules, which consist of a regular expression to match the thread name against, and a set of commands that allow to specify the real-time properties of a thread.</p>
<p>Whenever the EPICS IOC starts a thread, its name is matched against all existing rules, and for matching rules the commands are applied.</p>
<p>Details can be found in the documentation for module <a class="el" href="group__threadrules.html">Rule-Based Thread Properties</a>.</p>
<dl class="section warning"><dt>Warning</dt><dd>The default priorities of the EPICS IOC threads are well-chosen. They have been proven to ensure reliable IOC operation and communication, in many installations, under a variety of circumstances. <br />
Manipulating the real-time properties, especially scheduling policies and priorities, may have unwanted side effects. Use this feature sparingly, and test well.</dd></dl>
<h2><a class="anchor" id="intro_memlock"></a>
Memory Locking</h2>
<p>A module allowing to lock the IOC process virtual memory into RAM. This makes sure that no swapping occurs, and thus avoids page faults which would introduce latency and lead to indeterministic timing.</p>
<p>Details can be found in the documentation for module <a class="el" href="group__memlock.html">Memory Locking</a>.</p>
<h1><a class="anchor" id="sources"></a>
Sources</h1>
<p>The sources are on GitHub at <a href="https://github.com/epics-modules/MCoreUtils">https://github.com/epics-modules/MCoreUtils</a></p>
<p>They can be checked out using </p><div class="fragment"><div class="line">git clone https:<span class="comment">//github.com/epics-modules/MCoreUtils.git</span></div>
</div><!-- fragment --><p>Releases can be found on GitHub (see above) or at <a href="http://sourceforge.net/projects/epics/files/mcoreutils/">http://sourceforge.net/projects/epics/files/mcoreutils/</a></p>
<h1><a class="anchor" id="requires"></a>
Requirements</h1>
<ul>
<li>Linux operating system </li>
<li><a href="http://www.aps.anl.gov/epics/">EPICS</a> <a href="http://www.aps.anl.gov/epics/base/R3-15/index.php">BASE 3.15</a> (3.15.1 or later)</li>
</ul>
<h1><a class="anchor" id="Installation"></a>
Installation</h1>
<ul>
<li>Unpack the distribution tar or check out the source tree. </li>
<li>Run <code>make</code> </li>
<li>To generate a minimal example IOC, run <code>make -C example</code></li>
</ul>
<h1><a class="anchor" id="usage"></a>
Usage</h1>
<p>To use the Multi-Core Utilities in an IOC application tree, you have to add a definition to <code>.../configure/RELEASE</code> that points to the location of the <code>mcoreutils</code> module.</p>
<p>In the directory that builds your IOC binary, the <code>Makefile</code> has to make sure the IOC is only built for Linux. Then add the dbd file and the Library, e.g.: </p><div class="fragment"><div class="line">...</div>
<div class="line">PROD_IOC_Linux = mcutest</div>
<div class="line">...</div>
<div class="line">mcutest_DBD += mcoreutils.dbd</div>
<div class="line">...</div>
<div class="line">mcutest_LIBS += mcoreutils</div>
<div class="line">...</div>
</div><!-- fragment --><p>That's it. Enjoy! </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Apr 21 2015 17:11:01 for EPICS Multi-Core Utilities by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
